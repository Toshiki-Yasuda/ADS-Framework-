# EAM: Effective Agent Method

## 概要

EAM（Effective Agent Method）は、各エージェントが最大限の成果を出すための実行手法層。
企業における「現場層」に相当し、調査・実装・テストの具体的な実行を担う。

## 責務

| 責務 | 説明 |
|------|------|
| 調査実行 | 技術調査、既存コード分析、ベストプラクティス調査 |
| 実装実行 | コーディング、リファクタリング |
| テスト実行 | テスト作成、テスト実行、カバレッジ確認 |
| 検証実行 | 実装結果の検証、品質確認 |

## 実行パターン

### 1. Research（調査）パターン

```
目的: 実装前の情報収集・分析

ステップ:
1. 対象の特定（何を調べるか明確化）
2. 既存コードの分析（関連ファイル、パターン）
3. 外部情報の収集（ドキュメント、ベストプラクティス）
4. 調査結果のまとめ
5. 実装方針の提案

出力:
- 調査結果サマリー
- 実装オプション（複数案）
- 推奨案と理由
```

### 2. Implement（実装）パターン

```
目的: コードの作成・修正

ステップ:
1. 要件の確認
2. 影響範囲の特定
3. 実装計画（どのファイルをどう変更するか）
4. コーディング
5. 自己レビュー（lint、型チェック）
6. 動作確認

原則:
- 小さく始めて、段階的に拡張
- 既存のコードスタイルに従う
- 1つの変更 = 1つの目的
- コメントは「なぜ」を書く（「何」はコードで表現）
```

### 3. Test（テスト）パターン

```
目的: 品質の担保

ステップ:
1. テスト対象の特定
2. テストケースの設計
   - 正常系
   - 異常系
   - 境界値
3. テストコード作成
4. テスト実行
5. カバレッジ確認
6. 失敗時の修正

原則:
- Arrange-Act-Assert パターン
- 1テスト = 1アサーション（推奨）
- テスト名は期待する振る舞いを表現
- モックは最小限に
```

### 4. Refactor（リファクタ）パターン

```
目的: コード品質の改善（振る舞いは変えない）

ステップ:
1. 改善対象の特定
2. テストの存在確認（なければ先に作成）
3. 小さな変更を段階的に適用
4. 各ステップでテスト実行
5. 最終確認

原則:
- テストが通る状態を維持
- 一度に1つの改善
- コミットは細かく
```

## 思考モード

Claude Code の extended thinking を活用:

| フレーズ | 思考量 | 用途 |
|---------|--------|------|
| "think" | 標準 | 通常の実装 |
| "think hard" | 多め | 複雑な問題 |
| "think harder" | さらに多め | アーキテクチャ判断 |
| "ultrathink" | 最大 | 重要な設計判断 |

## 品質チェックリスト

### 実装時
- [ ] 型エラーがない
- [ ] lint警告がない
- [ ] 既存テストが通る
- [ ] 新規コードにテストがある

### テスト時
- [ ] 正常系をカバー
- [ ] 異常系をカバー
- [ ] 境界値をカバー
- [ ] カバレッジ80%以上

### レビュー前
- [ ] セルフレビュー実施
- [ ] 不要なコード削除
- [ ] コメント追加（必要な箇所）
- [ ] ドキュメント更新（必要な場合）

## エラーハンドリング

### 実装中にエラーが発生した場合

```
1. エラーメッセージを確認
2. 原因を特定（スタックトレース分析）
3. 修正案を検討
4. 修正を適用
5. テストで検証
6. 同様のエラーが他にないか確認
```

### 解決できない場合

```
1. 試したことを記録
2. エラーの詳細を整理
3. AOM層にエスカレーション
4. 人間の判断を仰ぐ
```
